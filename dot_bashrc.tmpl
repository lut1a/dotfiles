#
# ~/.bashrc
#

_checkexec ()
{
    command -v "$1" > /dev/null
}

if [ -f "$HOME"/.Xdefaults ]
then
xrdb -merge "$HOME"/.Xdefaults
fi

if [ -d "$HOME"/bin ]
then
    PATH=$PATH:"$HOME"/bin
fi

if [ -d "$HOME"/go/bin ]
then
    PATH=$PATH:"$HOME"/go/bin
fi

if [ -d /usr/local/go/bin ]
then
    PATH=$PATH:/usr/local/go/bin
fi

if [ -f "$HOME"/.bash/git-prompt.sh ]
then
    source "$HOME"/.bash/git-prompt.sh
    GIT_PS1_SHOWDIRTYSTATE=1
fi

if [ -n "$SSH_CONNECTION" ]
then
    PS1='\u@\h: \w \$ \n>'
elif [ -f "$HOME"/.bash/git-prompt.sh ]
then
    PS1='\w \$$(__git_ps1 " (%s)") \n> '
else
    PS1='\w \$ \n> '
fi
PS2="> "
if ! shopt -oq posix
then
    if [ -f /usr/share/bash-completion/bash_completion ]
    then
        . /usr/share/bash-completion/bash_completion
    elif [ -f /etc/bash_completion ]
    then
        . /etc/bash_completion
    fi
fi
[ "$PS1" ] && complete -cf sudo
# If not running interactively, don't do anything
[[ $- != *i* ]] && return

if _checkexec dircolors
then
    dircolors_data="$HOME/.dircolors"
    test -r $dircolors_data && eval "$(dircolors -b ${dircolors_data})" || eval "$(dircolors -b)"
fi
source <(gopass completion bash)
source $HOME/.bash/aliases.sh
export EDITOR={{ .userEditor }}
export GIT_EDITOR=$EDITOR
export VISUAL=$EDITOR
export PAGER={{ .pager }}
export SSH_AUTH_SOCK="$XDG_RUNTIME_DIR/ssh-agent.socket"
PATH=$HOME/bin:/usr/local/go/bin:$HOME/go/bin:$PATH
export PATH
