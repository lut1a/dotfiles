# ~/.bashrc
# vi: ft=sh
# shell benchmark
# * for interactive login shell: `time bash --login -i -c true`
# * for interactive shell: `time bash -i -c true`
. "$HOME"/.shrc/shrc

if [ -f "$HOME"/.shrc/git-prompt.sh ]; then
	. "$HOME"/.shrc/git-prompt.sh
	GIT_PS1_SHOWDIRTYSTATE=1
fi

if [ "$SSH_CONNECTION" != "" ]; then
	PS1='\u@\h: \w \$ \n> '
elif [ -f "$HOME"/.shrc/git-prompt.sh ]; then
	PS1='\w \$$(__git_ps1 " (%s)") \n> '
else
	PS1='\w \$ \n> '
fi
PS2='> '

if ! shopt -oq posix; then
	if [ -f /usr/share/bash-completion/bash_completion ]; then
		. /usr/share/bash-completion/bash_completion
	elif [ -f /etc/bash_completion ]; then
		. /etc/bash_completion
	fi
fi
[ "$PS1" ] && complete -cf sudo

shopt -s extglob
shopt -s checkwinsize
export HISTCONTROL=ignoreboth:erasedups
shopt -s histappend

if _checkexec gopass; then
	. <(gopass completion bash)
fi
