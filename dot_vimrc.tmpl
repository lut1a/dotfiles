" vim: ft=vim
vim9script
g:loaded_2html_plugin = 1
g:loaded_getscriptPlugin = 1
g:loaded_logipat = 1
g:loaded_rrhelper = 1
g:loaded_gzip = 1
g:loaded_tarPlugin = 1 | g:loaded_tar = 1
g:loaded_zipPlugin = 1 | g:loaded_zip = 1
g:loaded_vimballPlugin = 1 | g:loaded_vimball = true
g:loaded_netrwPlugin = 1 | g:loaded_netrw = true
def Load_Plugins(t: number)
    packloadall
enddef
augroup USER_CMDS | autocmd!
    autocmd VimEnter * timer_start(20, function('Load_Plugins'))
augroup END
set nocompatible encoding=utf-8 number relativenumber textwidth=72
\ colorcolumn=80 errorbells visualbell belloff=esc diffopt+=iwhite
\ showbreak=>\ \ \ hlsearch tabstop=4 expandtab softtabstop=4 shiftwidth=4
\ autoindent title titlestring=VIM:\ %-25.55F\ %a%r%m titlelen=70 ttyfast
\ showcmd showmode showcmd spelllang=en,fr spellsuggest=10

{{- if eq .computerType "personal" }} 
set backupdir=~/.vim/backup
set directory=~/.vim/backupf
set clipboard=unnamedplus
xnoremap "+y y:call system("wl-copy", @")<cr>
nnoremap "+p :let @"=substitute(system("wl-paste --no-newline"), '<C-v><C-m>', '', 'g')<cr>p
nnoremap "*p :let @"=substitute(system("wl-paste --no-newline --primary"), '<C-v><C-m>', '', 'g')<cr>p

{{- if eq .chezmoi.os "linux" }}
if has("gui_running")
    set guioptions-=mTr guifont=JetBrains\ Mono\ 12 guiligatures=!\"#$%&()*+-./:<=>?@[]^_{\|~
endif
{{- end }}

{{- end }}

if !has('gui_running') && &term =~ '^\%(screen\|tmux\)'
  &t_8f = "\<Esc>[38;2;%lu;%lu;%lum"
  &t_8b = "\<Esc>[48;2;%lu;%lu;%lum"
endif
set ofu=syntaxcomplete#Complete
set termguicolors
colorscheme modus_operandi

filetype plugin indent on | syntax enable syntax on
au BufNewFile,BufRead *.json set ft=json syntax=javascript
